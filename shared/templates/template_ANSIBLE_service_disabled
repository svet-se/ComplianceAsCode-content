# platform = multi_platform_all
# reboot = false
# strategy = disable
# complexity = low
# disruption = low
- name: Disable service {{{ SERVICENAME }}}
  systemd:
    name: "{{{ DAEMONNAME }}}.{{ item }}"
    enabled: "no"
    state: "stopped"
{{%- if MASK_SERVICE %}}
    masked: "yes"
{{%- endif %}}
  register: service_result
  failed_when: "service_result is failed and ('Could not find the requested service' not in service_result.msg) and ('Unit file {{{ DAEMONNAME }}}.{{ item }} does not exist' not in service_result.msg)"
  with_items:
    - service
{{%- if init_system == "systemd" %}}
    - socket
{{%- endif %}}

